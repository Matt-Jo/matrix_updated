var ck=ck||{};ck.rotator=function(){this.direction=this.transition_time=this.static_time=this.target_width=this.$target=null;this.control={$next:null,$prev:null,$pause:null,$play:null,$pauseplay:null};this.defaults={static_time:6E3,transition_time:600,direction:"right2left"};this.image_list=[];this.image_idx=0;this.timer_left=this.timer_start=this.action_time=this.timer=this.target_width=null;this.timer_active=!1;0<arguments.length&&this.init(arguments[0])};
ck.rotator.prototype.init=function(a){var b=this,c=!0;a.target&&(this.$target=a.target);a.static_time&&(this.static_time=a.static_time);a.transition_time&&(this.transition_time=a.transition_time);a.direction&&(this.direction=a.direction);a.next&&(this.control.$next=$("#"+a.next));a.prev&&(this.control.$prev=$("#"+a.prev));a.pause&&(this.control.$pause=$("#"+a.pause));a.play&&(this.control.$play=$("#"+a.play));a.pauseplay&&(this.control.$pauseplay=$("#"+a.pauseplay));a.start&&(c=a.start);null==this.static_time&&
(this.static_time=this.defaults.static_time);null==this.transition_time&&(this.transition_time=this.defaults.transition_time);null==this.direction&&(this.direction=this.defaults.direction);null!=this.control.$next&&this.control.$next.click(function(a){a.preventDefault();b.next(!0);return!1});null!=this.control.$prev&&this.control.$prev.click(function(a){a.preventDefault();b.prev(!0);return!1});null!=this.control.$pause&&this.control.$pause.click(function(a){a.preventDefault();b.pause();return!1});
null!=this.control.$play&&this.control.$play.click(function(a){a.preventDefault();b.play();return!1});null!=this.control.$pauseplay&&this.control.$pauseplay.click(function(a){a.preventDefault();b.pauseplay();return!1});null!=this.$target&&(this.$target.hover(function(){b.pauseplay()}),this.target_width=this.$target.closest(".rotator-viewer").width(),this.$target.find("a").each(function(){var a={};a.target=$(this).attr("href");a.source=$(this).find("img").attr("src");a.$element=$(this);b.add_img(a)}),
c&&this.start())};ck.rotator.prototype.add_img=function(a){"undefined"!==typeof a.$element&&a.$element instanceof $?1<=this.image_list.length&&a.$element.css("visibility","hidden"):a.$element=null;for(var b=0;b<this.image_list.length;b++)if(a.source==this.image_list[b].source)return;this.image_list.push(a);1==this.image_list.length&&(this.image_list[0].$element&&this.image_list[0].$element.is(":visible")||this.load_img(0,!0))};
ck.rotator.prototype.load_img=function(a,b){b="undefined"!==typeof b?b:!1;"undefined"!==typeof this.image_list[a].$element&&this.image_list[a].$element instanceof $?b&&this.image_list[a].$element.show().css("visibility","visible"):(this.image_list[a].target||(this.image_list[a].target="#"),this.image_list[a].$element=$("<a></a>").attr("href",this.image_list[a].target),1==this.image_list[a].newpage&&this.image_list[a].$element.attr("target","_blank"),$("<img>").attr("src",this.image_list[a].source).attr("alt",
this.image_list[a].alt).attr("title",this.image_list[a].title).appendTo(this.image_list[a].$element),this.image_list[a].$element.appendTo(this.$target))};ck.rotator.prototype.start=function(){var a=this;null!=this.$target&&0!=this.image_list.length&&$(document).ready(function(){a.play();for(var b=1;b<a.image_list.length;b++)a.load_img(b)})};
ck.rotator.prototype.next=function(){var a=this;this.pause(!0);var b=(this.image_idx+1)%this.image_list.length;this.image_list[b].$element.show().css("visibility","visible");this.$target.animate({left:-1*this.target_width*b},this.transition_time,function(){a.image_idx=b;a.play()})};
ck.rotator.prototype.prev=function(){var a=this;this.pause(!0);var b=0<this.image_idx?(this.image_idx-1)%this.image_list.length:this.image_list.length-1;this.image_list[b].$element.show().css("visibility","visible");this.$target.animate({left:-1*this.target_width*b},this.transition_time,function(){a.image_idx=b;a.play()})};ck.rotator.prototype.pause=function(a){this.timer_left=a?this.timer_start=null:this.static_time-(new Date-this.timer_start);this.timer_active=!1;clearTimeout(this.timer)};
ck.rotator.prototype.play=function(){rotator=this;var a=this.static_time;this.timer_left&&(a=this.timer_left);this.timer_active=!0;this.timer_start=new Date;this.timer=setTimeout(function(){rotator.next()},a)};ck.rotator.prototype.pauseplay=function(){this.timer_active?this.pause():this.play()};